<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.2.6/vue.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="./src/hash.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.3.1/css/foundation.min.css" rel="stylesheet"/>
<link href="./css/style.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
<meta charset="utf-8">
<title>Switcheo Smart Contract Explorer</title>
</head>
<body>

<div  class="container" id="api" v-cloak>

<h2><span style="color:#88C773">Switcheo</span> Smart Contract Explorer</h2>

 <!-- Buttons select contract -->  
 <div class="row" >
  <div class="small button-group">
	  <input v-on:click = "request" type="radio" id="All" value="All" v-model="contr">
      <label class="button success" style="color:#fff;" for="All">All</label>
	  
      <input v-on:click = "request" type="radio" id="v20" value = 'v20' v-model="contr">
      <label class="button success" style="color:#fff;" for="v20">Ver. 2.0</label>
	  
      <input v-on:click = "request" type="radio" id="v15" value="v15" v-model="contr">
      <label class="button success"  style="color:#fff;" for="v15">Ver. 1.5</label>
	  
	  <input v-on:click = "request" type="radio" id="v10" value="v10" v-model="contr">
      <label class="button success" style="color:#fff;" for="v10">Ver. 1.0</label>
    </div>
	
</div>
   
<!--Input address-->  
  <div class="row">
	<input style="background-color: #32374B; color:#FFFFFF; width:403px; margin:auto auto 1px auto;" autofocus type="text"
	v-on:keyup.enter = "request" v-model.trim = "address" placeholder = "Input your NEO address">
  </div>

<!-- Button -->  
  <div class="row">			 
	<button style="width:403px; color:#FFFFFF;" 
	v-on:click = "request" class="button success"><b id = "load">Go</b></button>
  </div>
   
<!-- tabs zone -->
<div class="row">
          
<div class="tabs">
		
            <input id="tab1" type="radio"  value="balance" v-model = "tabn">
            <label for="tab1" >BALANCE</label>
            <input id="tab2" type="radio"  value="history" v-model = "tabn">
            <label for="tab2" >HISTORY</label>
            <input id="tab3" type="radio" value="summary" v-model = "tabn">
            <label for="tab3" >SUMMARY</label>
          
<!--Output balances-->
<section id="content-tab1">							  
	<div class="row">	
		<div class="large-4 columns"  v-for="(result, index) in results"> <!-- requested Vue module in api.js -->
		
			<!--auto comments in columns-->
			<div style="background-color: #88C773" >
			<p v-show="index == 'confirming'">WAITING FOR CONFIRMATION</p>
			<p v-show="index == 'confirmed'">CONTRACT BALANCE</p> 
			<p v-show="index == 'locked'">TOKENS IN ORDERS</p> 
			</div>
		
			<!-- Print balance data in table -->
			<div style="background-color:#212A3F" v-for = "(result1, index1) in result">	
				<div v-for = "(dec, tok) in tokens"> <!--get decimals of tokens-->
				
					<p v-show = "index != 'confirming' && tok == index1">
					{{parseFloat(result1+"e-"+dec.decimals)}}&nbsp;&nbsp;&nbsp;{{index1}}
					</p>
					
					<!-- print balance only for 'confirming'-->					
					<div v-if = "index == 'confirming' && tok == index1" v-for = "result2 in result1"> 		
					<p> {{parseFloat(result2.amount+"e-"+dec.decimals)}}&nbsp;&nbsp;&nbsp;{{index1}} &nbsp;&nbsp;&nbsp;
						<span style="color:grey">{{result2.event_type}}</span>		
					</p>
					</div>
				</div>
			</div> 
	
		</div>
	</div>
</section>
			
<!-- Output history -->    
<section id="content-tab2"> 	
	<div class="row">	
		<div  v-for="uhistt in uhistory" :key="uhistt.id"> <!-- requested Vue module in api.js -->
			<div class = "large-6 large-centered columns" v-for="uresult in uhistt.data.entries" :key="uresult.id">
				<div style="background-color:#212A3F">
				
							<!-- for all tokens -->						
						<div v-for = "(uhash, utok) in tokens" v-if = "uresult.asset == uhash.hash" :key="uhash.id">  <!--get hash of tokens-->
							<p style = "text-align:left;">							
							{{moment.unix(uresult.time).format('DD-MM-YYYY, HH:mm:ss') }}
							<span v-show = "uresult.address_from == vm.xaddress" style="color:green">deposit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
							<span v-show = "uresult.address_to == vm.xaddress" style="color:yellow">withdrawal&nbsp;</span>
							{{uresult.amount}} {{utok}}
							</p>							
						</div>
				</div>
			</div>
		</div>				
	</div>	
</section>			
           
<section id="content-tab3">
			
			----------
			
</section>
			
<div class = "grad"> </div> 
</div>      
</div>
</div>

<script src="./src/api.js"></script> 

</body>
</html>





