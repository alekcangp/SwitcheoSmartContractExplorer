<!DOCTYPE html>
<html lang="en">
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/vue/2.2.6/vue.min.js"></script>
<script src="https://unpkg.com/axios/dist/axios.min.js"></script>
<script src="./src/hash.js"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/foundation/6.3.1/css/foundation.min.css" rel="stylesheet"/>
<link href="./css/style.css" rel="stylesheet"/>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.22.2/moment.min.js"></script>
<meta charset="utf-8">
<title>Switcheo Smart Contract Explorer</title>
</head>
<body>

<div  class="container" id="api" style = "min-width: 500px" v-cloak>

<h2><span style="color:#88C773">Switcheo</span> Smart Contract Explorer</h2>

 <!-- Buttons select contract -->  
 <div class="row" >
  <div  class="small button-group">
	  <input v-on:click = "request" type="radio" id="All" value="All" v-model="contr">
      <label class="button success" style="color:#fff;" for="All">All</label>
	  
      <input v-on:click = "request" type="radio" id="v20" value = 'v20' v-model="contr">
      <label class="button success" style="color:#fff;" for="v20">Ver. 2.0</label>
	  
      <input v-on:click = "request" type="radio" id="v15" value="v15" v-model="contr">
      <label class="button success"  style="color:#fff;" for="v15">Ver. 1.5</label>
	  
	  <input v-on:click = "request" type="radio" id="v10" value="v10" v-model="contr">
      <label class="button success" style="color:#fff;" for="v10">Ver. 1.0</label>
    </div>
	
</div>
   
<!--Input address-->  
  <div class="row">
	<input style="background-color: #32374B; color:#FFFFFF; width:423px; margin:auto auto 1px auto;" autofocus type="text"
	v-on:keyup.enter = "request" v-model.trim = "address" placeholder = "Input your NEO address">
  </div>

<!-- Button -->  
  <div class="row">			 
	<button style="width:423px; color:#FFFFFF;" 
	v-on:click = "request" class="button success"><b id = "load">Go</b></button>
  </div>
   
<!-- tabs zone -->
<div class="row">
          
	<div class="tabs" >		
		
            <input id="tab1" type="radio"  value="balance" v-model = "tabn">
            <label for="tab1" >BALANCE</label>
            <input id="tab2" type="radio"  value="transfers" v-model = "tabn">
            <label for="tab2" >TRANSFERS</label>
            <input id="tab3" type="radio" value="orders" v-model = "tabn">
            <label for="tab3" >ORDERS</label>
			<input id="tab4" type="radio" value="volume" v-model = "tabn">
            <label for="tab4" >VOLUME</label>
			
      
<!--Output BALANCE-->
<section id="content-tab1">							  
	<div class="row">
<p><b>Balance contract</b></p>	
		<div class="large-4 columns"  v-for="(result, index) in results"> <!-- requested Vue module in api.js -->
		
			<!--auto comments in columns-->
			<div style="background-color: #88C773; font-weight: bold">
			<p v-show="index == 'confirming'">WAITING FOR CONFIRMATION</p>
			<p v-show="index == 'confirmed'">CONTRACT BALANCE</p> 
			<p v-show="index == 'locked'">TOKENS IN ORDERS</p> 
			</div>
		
			<!-- Print balance data in table -->
			<div style="background-color:#212A3F" v-for = "(result1, index1) in result">	
				<div v-for = "(dec, tok) in tokens"> <!--get decimals of tokens-->
				
					<p v-show = "index != 'confirming' && tok == index1">
					<b>{{parseFloat(result1+"e-"+dec.decimals)}}</b>&nbsp;&nbsp;&nbsp;{{index1}}
					</p>
					
					<!-- print balance only for 'confirming'-->					
					<div v-if = "index == 'confirming' && tok == index1" v-for = "result2 in result1"> 		
					<p><b>{{parseFloat(result2.amount+"e-"+dec.decimals)}}</b>&nbsp;&nbsp;&nbsp;{{index1}} &nbsp;&nbsp;&nbsp;
						<span style="color:grey">{{result2.event_type}}</span>		
					</p>
					</div>
				</div>
			</div> 
	
		</div>
	</div>
</section>
			
<!-- Output TRANSFERS -->    
<section id="content-tab2"> 	
	<div class="row">	
	<p><b>Deposit and withdrawal contract</b></p>
		<div  v-for="uhistt in uhistory" :key="uhistt.id"> <!-- requested Vue module in api.js -->
			
			<div class = "large-8 large-centered columns" v-for="uresult in uhistt.data.entries" :key="uresult.id">
				<div style="background-color:#212A3F">
				
							<!-- for all tokens -->						
						<div v-for = "(uhash, utok) in tokens" v-if = "uresult.asset == uhash.hash" :key="uhash.id">  <!--get hash of tokens-->
							<p style = "text-align:left;">							
							{{moment.unix(uresult.time).format('DD-MM-YYYY, HH:mm:ss') }}
							<span v-show = "uresult.address_from == vm.xaddress" style="color:green">deposit&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span>
							<span v-show = "uresult.address_to == vm.xaddress" style="color:yellow">withdrawal&nbsp;</span>
							<b>{{uresult.amount}}</b> {{utok}}
							</p>							
						</div>
				</div>
			</div>
			
		</div>				
	</div>	
</section>			
        
		
	<!-- Output ORDERS--> 
<section id="content-tab3"> 	
<div class="row">	
<p><b>Last 50 orders</b></p>
	<div  class = "large-9 large-centered columns" v-for = "oresult0 in orders" :key="oresult0.id"> 
		<div v-for = "oresult in oresult0.data" :key="oresult.id">
				<div v-if = "oresult.offer_asset_id == ohash1.hash" v-for = "(ohash1, otok1) in tokens"  :key="otok1.id">
					<div v-if = "oresult.want_asset_id == ohash2.hash"  v-for = "(ohash2, otok2) in tokens" :key="otok2.id"> 
						<p style = "text-align:left; background-color:#212A3F">

							{{moment(oresult.created_at).format('DD-MM-YYYY, HH:mm:ss')}} 
							<span v-show = "oresult.side == 'sell'">
							<span style = "color:red">sell</span> {{otok1}}/{{otok2}} <b>{{parseFloat(oresult.offer_amount+"e-"+ohash1.decimals)}}</b> &nbsp;&nbsp;price:
							</span>
							<span v-show = "oresult.side == 'buy'">
							<span style = "color:green">buy</span> {{otok2}}/{{otok1}} <b>{{parseFloat(oresult.want_amount+"e-"+ohash2.decimals)}}</b> &nbsp;&nbsp;price:
							</span>
							
							{{priced(oresult.fills, oresult.makes)}}
							<span v-if = "oresult.order_status == 'open'" style = "color:yellow">{{oresult.order_status}}</span>
							<span v-else style = "color:grey">{{oresult.order_status}}</span> 
							filled: {{Math.round(persent(oresult.fills, oresult.makes)/Number(oresult.offer_amount)*100)}}%
						</p>
					</div>
				</div>	
		</div>	
	</div>
</div>
</section>	

<section id="content-tab4"> 	
developing...	
</section>
			
<div class = "grad"> </div> 
</div>      
</div>
</div>

<script src="./src/api.js"></script> 

</body>
</html>





